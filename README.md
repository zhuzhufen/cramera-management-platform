# ç›¸æœºç§Ÿèµç®¡ç†å¹³å°

ä¸€ä¸ªåŸºäºNode.jså’ŒPostgreSQLçš„ç§»åŠ¨ç«¯ç›¸æœºç§Ÿèµç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·æƒé™ç®¡ç†å’Œç§Ÿèµæ—¥å†åŠŸèƒ½ã€‚

## é¡¹ç›®ç®€ä»‹

ç›¸æœºç§Ÿèµç®¡ç†å¹³å°æ˜¯ä¸€ä¸ªä¸“ä¸ºç›¸æœºç§Ÿèµä¸šåŠ¡è®¾è®¡çš„Webåº”ç”¨ï¼Œæä¾›å®Œæ•´çš„ç›¸æœºç®¡ç†ã€ç§Ÿèµç®¡ç†ã€ç”¨æˆ·ç®¡ç†å’Œæ—¥å†è§†å›¾åŠŸèƒ½ã€‚ç³»ç»Ÿæ”¯æŒç®¡ç†å‘˜å’Œä»£ç†äººä¸¤ç§è§’è‰²ï¼Œå…·æœ‰å®Œå–„çš„æƒé™æ§åˆ¶æœºåˆ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
- **ç›¸æœºç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ç›¸æœºä¿¡æ¯ï¼Œæ”¯æŒç›¸æœºçŠ¶æ€ç®¡ç†
- **ç§Ÿèµç®¡ç†**: åˆ›å»ºç§Ÿèµè®°å½•ï¼Œæ£€æŸ¥æ—¶é—´å†²çªï¼Œç®¡ç†ç§ŸèµçŠ¶æ€
- **æ—¥å†è§†å›¾**: å¯è§†åŒ–å±•ç¤ºç›¸æœºç§Ÿèµæ—¥å†ï¼Œæ”¯æŒæŒ‰æœˆä»½å’Œç›¸æœºç­›é€‰
- **ç”¨æˆ·ç®¡ç†**: å¤šç”¨æˆ·ç³»ç»Ÿï¼Œæ”¯æŒç®¡ç†å‘˜å’Œä»£ç†äººè§’è‰²
- **æƒé™æ§åˆ¶**: åŸºäºJWTçš„è®¤è¯æˆæƒï¼Œä¸åŒè§’è‰²æ‹¥æœ‰ä¸åŒæƒé™

### ğŸ¯ ç‰¹è‰²åŠŸèƒ½
- **ç§»åŠ¨ç«¯ä¼˜åŒ–**: å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨è®¾å¤‡
- **æ—¶é—´å†²çªæ£€æµ‹**: æ™ºèƒ½æ£€æŸ¥ç§Ÿèµæ—¶é—´å†²çªï¼Œé¿å…é‡å¤ç§Ÿèµ
- **åŠ¨æ€çŠ¶æ€ç®¡ç†**: æ ¹æ®ç§Ÿèµæ—¶é—´åŠ¨æ€æ›´æ–°ç›¸æœºå¯ç”¨çŠ¶æ€
- **æœç´¢ç­›é€‰**: æ”¯æŒæŒ‰ç›¸æœºç¼–ç ã€ä»£ç†äººã€å®¢æˆ·å§“åç­‰å¤šç»´åº¦æœç´¢
- **æ•°æ®ç»Ÿè®¡**: æä¾›ç§Ÿèµè®°å½•ç»Ÿè®¡å’Œæ´»è·ƒç§Ÿèµæ•°é‡æ˜¾ç¤º

## æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js** - Webæ¡†æ¶
- **PostgreSQL** - æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **bcrypt** - å¯†ç åŠ å¯†
- **CORS** - è·¨åŸŸæ”¯æŒ

### å‰ç«¯
- **HTML5/CSS3** - é¡µé¢ç»“æ„åŠæ ·å¼
- **JavaScript (ES6+)** - å®¢æˆ·ç«¯é€»è¾‘
- **Bootstrap** - UIæ¡†æ¶
- **jQuery** - DOMæ“ä½œ
- **Bootstrap Datepicker** - æ—¥æœŸé€‰æ‹©ç»„ä»¶

### éƒ¨ç½²
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **Docker Compose** - æœåŠ¡ç¼–æ’

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 14+
- PostgreSQL 12+
- æˆ–ä½¿ç”¨Dockerç¯å¢ƒ

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd camera-rental-platform
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **é…ç½®æ•°æ®åº“**
   - åˆ›å»ºPostgreSQLæ•°æ®åº“ `camera_rental_management`
   - æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š
   ```bash
   psql -d camera_rental_management -f database/migrations/init.sql
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶ä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼š
   ```env
   DB_HOST=127.0.0.1
   DB_PORT=5432
   DB_NAME=camera_rental_management
   DB_USER=postgres
   DB_PASSWORD=123456
   ```

5. **å¯åŠ¨åº”ç”¨**
   ```bash
   # å¼€å‘æ¨¡å¼
   npm run dev
   
   # ç”Ÿäº§æ¨¡å¼
   npm start
   ```

6. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000/cam`

### Dockeréƒ¨ç½²

1. **æ„å»ºé•œåƒ**
   ```bash
   docker build -t camera-rental-platform .
   ```

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

## æ•°æ®åº“ç»“æ„

### ä¸»è¦æ•°æ®è¡¨

#### users (ç”¨æˆ·è¡¨)
- `id` - ä¸»é”®
- `username` - ç”¨æˆ·å
- `password` - åŠ å¯†å¯†ç 
- `role` - è§’è‰² (admin/agent)
- `agent_name` - ä»£ç†äººå§“å
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

#### cameras (ç›¸æœºè¡¨)
- `id` - ä¸»é”®
- `camera_code` - ç›¸æœºç¼–ç 
- `brand` - å“ç‰Œ
- `model` - å‹å·
- `serial_number` - åºåˆ—å·
- `agent` - ä»£ç†äºº
- `status` - çŠ¶æ€ (available/unavailable)
- `description` - æè¿°
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

#### rentals (ç§Ÿèµè®°å½•è¡¨)
- `id` - ä¸»é”®
- `camera_id` - ç›¸æœºID
- `customer_name` - å®¢æˆ·å§“å
- `customer_phone` - å®¢æˆ·æ‰‹æœºå·
- `rental_date` - ç§Ÿèµå¼€å§‹æ—¥æœŸ
- `return_date` - ç§Ÿèµç»“æŸæ—¥æœŸ
- `actual_return_date` - å®é™…å½’è¿˜æ—¥æœŸ
- `status` - çŠ¶æ€ (active/completed/cancelled/overdue)
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

## APIæ¥å£

### è®¤è¯ç›¸å…³
- `POST /cam/api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /cam/api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `POST /cam/api/auth/change-password` - ä¿®æ”¹å¯†ç 

### ç›¸æœºç®¡ç†
- `GET /cam/api/cameras` - è·å–ç›¸æœºåˆ—è¡¨
- `GET /cam/api/cameras/search` - æœç´¢ç›¸æœº
- `GET /cam/api/cameras/:id` - è·å–ç›¸æœºè¯¦æƒ…
- `POST /cam/api/cameras` - æ·»åŠ ç›¸æœº
- `PUT /cam/api/cameras/:id` - æ›´æ–°ç›¸æœºä¿¡æ¯
- `PUT /cam/api/cameras/:id/status` - æ›´æ–°ç›¸æœºçŠ¶æ€
- `DELETE /cam/api/cameras/:id` - åˆ é™¤ç›¸æœº

### ç§Ÿèµç®¡ç†
- `GET /cam/api/rentals` - è·å–ç§Ÿèµè®°å½•
- `GET /cam/api/rentals/calendar` - è·å–ç§Ÿèµæ—¥å†æ•°æ®
- `GET /cam/api/rentals/check-conflict` - æ£€æŸ¥æ—¶é—´å†²çª
- `POST /cam/api/rentals` - åˆ›å»ºç§Ÿèµè®°å½•
- `DELETE /cam/api/rentals/:id` - åˆ é™¤ç§Ÿèµè®°å½•

### ç”¨æˆ·ç®¡ç†
- `GET /cam/api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `GET /cam/api/users/:id` - è·å–ç”¨æˆ·è¯¦æƒ…
- `POST /cam/api/users` - æ·»åŠ ç”¨æˆ·
- `PUT /cam/api/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /cam/api/users/:id` - åˆ é™¤ç”¨æˆ·

## æƒé™è¯´æ˜

### ç®¡ç†å‘˜æƒé™
- ç®¡ç†æ‰€æœ‰ç›¸æœºå’Œç§Ÿèµè®°å½•
- ç®¡ç†æ‰€æœ‰ç”¨æˆ·è´¦æˆ·
- æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰æ•°æ®

### ä»£ç†äººæƒé™
- åªèƒ½ç®¡ç†è‡ªå·±åä¸‹çš„ç›¸æœº
- åªèƒ½æŸ¥çœ‹è‡ªå·±ç›¸æœºçš„ç§Ÿèµè®°å½•
- æ— æ³•ç®¡ç†å…¶ä»–ç”¨æˆ·

## é»˜è®¤è´¦æˆ·

ç³»ç»Ÿé¢„ç½®ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼š
- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123
- **è§’è‰²**: ç®¡ç†å‘˜

## é¡¹ç›®ç»“æ„

```
camera-rental-platform/
â”œâ”€â”€ database/                 # æ•°æ®åº“ç›¸å…³
â”‚   â””â”€â”€ migrations/          # æ•°æ®åº“è¿ç§»è„šæœ¬
â”œâ”€â”€ public/                  # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                 # JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ lib/                # ç¬¬ä¸‰æ–¹åº“
â”‚   â””â”€â”€ *.html              # é¡µé¢æ–‡ä»¶
â”œâ”€â”€ server.js               # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile              # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml      # Dockerç¼–æ’æ–‡ä»¶
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `server.js` ä¸­æ·»åŠ æ–°çš„APIè·¯ç”±
2. åœ¨å‰ç«¯å¯¹åº”é¡µé¢ä¸­æ·»åŠ äº¤äº’é€»è¾‘
3. å¦‚æœ‰éœ€è¦ï¼Œæ›´æ–°æ•°æ®åº“ç»“æ„
4. æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§

### æ•°æ®åº“è¿ç§»
æ•°æ®åº“è¿ç§»è„šæœ¬ä½äº `database/migrations/` ç›®å½•ï¼ŒæŒ‰æ—¶é—´é¡ºåºæ‰§è¡Œï¼š
1. `init.sql` - åˆå§‹æ•°æ®åº“ç»“æ„
2. `update_rentals_table.sql` - ç§Ÿèµè¡¨æ›´æ–°

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥PostgreSQLæœåŠ¡æ˜¯å¦è¿è¡Œ
   - éªŒè¯æ•°æ®åº“è¿æ¥é…ç½®
   - ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

2. **JWTè®¤è¯å¤±è´¥**
   - æ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„Authorizationå­—æ®µ
   - éªŒè¯JWTä»¤ç‰Œæ˜¯å¦è¿‡æœŸ
   - ç¡®è®¤JWTå¯†é’¥é…ç½®

3. **æ—¶é—´å†²çªæ£€æµ‹å¼‚å¸¸**
   - æ£€æŸ¥æ—¥æœŸæ ¼å¼æ˜¯å¦æ­£ç¡®
   - éªŒè¯ç§Ÿèµæ—¶é—´æ®µé€»è¾‘
   - ç¡®è®¤æ•°æ®åº“æ—¶åŒºè®¾ç½®

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤GitHub Issue
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**æ³¨æ„**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶è¯·åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç å’ŒJWTå¯†é’¥ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨ã€‚
